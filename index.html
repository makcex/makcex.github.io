<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="description" content="Bengkel Motor eral dan Rendi di Ds Perbo Layanan ganti oli, service motor, tambal ban, dan ganti sparepart, cepat terpercaya dan terjangkau">
<meta name="keywords" content="bengkel motor eral dan Rendi desa perbo, bengkel motor perbo, bengkel motor desa perbo, bengkel eral perbo, benkel rendi perbo, bengkel motor honda dan yamaha desa perbo, service motor desa perbo, ganti oli perbo, tambal ban perbo">
<meta name="author" content="benkel motor perbo">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:title" content="Bengkel Motor Eral dan Rendi Desa Perbo">
<meta property="og:description" content="Layanan Service Motor, ganti oli,tambal ban, dan sparepart Honda dan Yamaha di desa perbo">
<meta property="og:type" content="website">
<meta property="og:url" content="https://makcex.github.io/">
<meta property="og:image" content="https://makcex.github.io/img/IMG_20260203_140709_148.jpg">
<meta name="robots" content="index, follow">
<title>Bengkel Motor Eral dan Rendi desa Perbo | Service,Ganti oli & sparepart</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: rgba(255, 255, 255, 0); 
  overflow-y: hidden;
}

/* HEADER */
header {
  top: 0;
  width: 100%;
  position: fixed;
  background: #ee4d2d;
  color: white;
  padding: 5px 10px;
  font-size: 20px;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
  z-index: 1000;
}

/* CONTAINER */
.container {
  overflow-y: auto;
  top: 70px;
  bottom: 20px;
  border: 1px solid rgba(255,255,255,0.15);
 position: fixed;
 margin-top: 100px;
  padding: 20px;
  width: 50%;
  background: rgba(255,255,255,0.15);
}

/* GRID PRODUK */
.products {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 15px;
}

/* CARD */
.card {
  background: rgba(255,255,255,0.96);
  box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
  border-radius: 6px;
  overflow: hidden;
  
}

.card img {
  width: 100%;
  height: 150px;
  object-fit: cover;
}
.content h2 {
  color: black;
  text-align: center;
}

.content {
  position: relative;  /* scroll ikut parent */
    overflow: visible;
    padding: 0;
}

p {
  color: black;
}

.info {
  position: fixed;
    bottom: 0;
    right: 50px;
    width: 250px;
    max-height: 75vh;
    background: rgba(255,255,255,0.96);
    border-radius: 20px 20px 0 0;
    box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
    padding: 15px;
    overflow-y: auto;   /* scroll di desktop */
    display: block;
    z-index: 999;
}

.info li {
  margin-left: 30px;
  color: #6b7280;
  margin-top: 8px;
}

.info h3 {
  color: #5c6bc9;
  text-align: center;
  font-family: Arial, sans-serif;
}

.info h4 {
  margin-left: 20px;
  color: black;
}
.card-body {
  padding: 10px;
}

.card-body h4 {
  margin: 5px 0;
  font-size: 14px;
}

.card-body p {
  margin: 3px 0;
  font-size: 12px;
  color: #555;
}

.keranjang {
  width: 500px;
  height: 600px;
  position: fixed;
  top: 110px;
  background: #ccc;
  border-radius: 8px;
  right: -500px;
  transition: all 0.3s ease-in-out;
  overflow-x: auto;
  z-index: 900;
  text-align: center;
}

.keranjang.active {
  right: 100px;
}

li {
  cursor: pointer;
}

li:hover {
  opacity: 0.8;
}

.cart {
  width: 500px;
}

.btn-hapus {
  width: 50px;
}

.price {
  color: #ee4d2d;
  font-weight: bold;
}



/* BUTTON */
button {
  width: 190px;
  padding: 8px;
  border: none;
  background: #ee4d2d;
  color: white;
  cursor: pointer;
  border-radius: 4px;
  margin-top: 8px;
}

button:hover {
  background: #d73211;
}

.delet {
  color: red;
  position: absolute;
  right: 5px;
  top: 10px;
  cursor: pointer;
  opacity: 0.7;
}

@keyframes flyToCart {
  0% { transform: scale(1) translateY(0); opacity: 1; }
  50% { transform: scale(1.2) translateY(-20px); opacity: 0.7; }
  100% { transform: scale(0.5) translateY(-50px); opacity: 0; }
}

.fly {
  animation: flyToCart 0.7s forwards;
}

ul {
  margin-right: 20px;
}

/* Container di bawah layar */
.ticker-wrap {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 20px;
  background: #333;
  overflow: hidden;
  z-index: 2000;
}

/* Konten ticker */
.ticker {
  display: flex;
  width: max-content;
  animation: scroll 80s linear infinite;
}

/* Teks yang berjalan */
.ticker span {
  white-space: nowrap;
  color: white;
  font-weight: bold;
  font-size: 18px;
  margin-right: 50px; /* jarak antar loop */
}

/* Animasi scroll dari kanan ke kiri */
@keyframes scroll {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}

/* Pause ketika hover */
.ticker-wrap:hover .ticker {
  animation-play-state: paused;
}

/* ===== RESPONSIVE HP ===== */
@media (max-width: 768px) {

  header {
    flex-direction: column;
    align-items: flex-start;
    font-size: 16px;
    position: fixed;
  }

  header h1 {
    font-size: 16px;
    margin: 5px 0;
  }

  ul {
    margin: 0;
    padding: 0;
  }

  /* container produk */
  .container {
    position: fixed;
    top: 60px;
    bottom: 20px;
    width: 90%;
    padding: 10px;
    overflow-y: auto;
  }

  .products {
    grid-template-columns: repeat(2, 1fr);
  }

  @media (max-width: 768px) {
  .info {
    position:fixed;
    background: rgba(255,255,255,0.96);
    left:0;
    bottom:0;
    width:100%;
    height:75vh;

    border-radius:20px 20px 0 0;
    box-shadow:0 -5px 20px rgba(0,0,0,.2);

    transform:translateY(88%);
    transition:transform .3s ease;

    display:flex;
    flex-direction:column;
    padding:0;
    z-index:999;
  }

  .handle{
    display:block;
    width:50px;
    height:5px;
    background:#ccc;
    border-radius:10px;
    margin:10px auto;
  }

  .content{
    flex:1;
    overflow:auto;
    padding:15px;
    -webkit-overflow-scrolling:touch;
  }

}
}
  /* KERANJANG full layar */
  .keranjang {
    width: 100%;
    height: 100%;
    top: 0;
    right: -100%;
    border-radius: 0;
    z-index: 2000;
  }

  .keranjang.active {
    right: 0;
  }

  button {
    width: 100%;
  }

  .ticker span {
    font-size: 14px;
  }


</style>
</head>

<body>

<header>
  <h1>Bengkel Motor Eral dan Rendi Ds Perbo </h1>
  
<ul>
  <li class="krj" id="krjn">ðŸ›’ Keranjang
    <span id="cartBadge" style="
    background:red;
    color:white;
    border-radius:50%;
    padding:2px 6px;
    font-size:12px;
    vertical-align: top;
    margin-left:5px;
    display:none;">0</span>
  </li>
</ul>
</header>

<div class="container">
  <div class="products" id="productList"></div>
</div>

<div class="info" id="sheet">
  <div class="handle"></div>

  <div class="content">
    <h2>
      Layanan Kami<br>
      murah dan bisa dipercaya
    </h2>
    <ul>
      <li>Ganti oli - Rp.50.000</li>
      <li>Service</li>
      <li>Tambal Ban</li>
      <li>Ganti SparePart</li>
    </ul>
    <hr>
    <h3>Alamat Bengkel</h3>
    <p>
      Ds Perbo perbatasan Batu Panco<br>
      Kec. Curup Utara Kab. Rejang Lebong Prov. Bengkulu sebelah Bengkel Mael
    </p><br>
    <h3>Kontak & Info Tambahan</h3>
  <p>Telepon/WA: 
    <a href="https://wa.me/62895640227868" target="_blank" style="color:#25D366; font-weight:bold; text-decoration:none;">
      0895-6402-27868
    </a>
  </p>
  <p>Melayani berbagai keperluan perbaikan motor Anda dengan cepat dan terpercaya.</p>
  </div>
</div>

<div class="pop" style="z-index: 9999; min-width: 300px; min-height: 60vh; display: none; position: absolute; left: 50%;">
  <input type="text" id="nama" placeholder="isi nama" style="padding: 0.5rem 0.25rem;"><br>
  <input type="number" id="hp" placeholder="Nomor HP"><br>
  <textarea name="" id="alamat" cols="30" rows="10" style="width: 100%;">alamat</textarea>
  <button onclick="kirim()">kirim</button>
</div>

<div class="keranjang" id="belanjaan">
        <h2>Keranjang</h2>
        <div class="cart" id="cartList"></div>
        <h3 id="total">Total: Rp 0</h3>
        <button onclick="checkout()">Checkout</button>
    </div>

    <div class="ticker-wrap">
  <div class="ticker">
    <span>
       â€¢ Menerima Jasa Pembuatan WEB : E-Commerce Toko Online, Usaha Shoppe Kecil, Form Pendaftaran, Landing Page, ALAMAT: Desa Perbo NAMA: Rice Kusnadi â€¢
    </span>
    <span>
      â€¢ Menerima Jasa Pembuatan WEB : E-Commerce Toko Online, Usaha Shoppe Kecil, Form Pendaftaran, Landing Page, ALAMAT: Desa Perbo NAMA: Rice Kusnadi  â€¢
    </span>
  </div>
</div>

<script>

  const keranjang = []
  const products = []

  fetch("/products")
  .then(res => res.json())
  .then(data => {
    products.push(...data)
    renderProducts()
  })

function updateBadge() {
  const badge = document.getElementById('cartBadge')
  const totalItem = keranjang.reduce((sum, item) => sum + item.jumlah, 0)

  if(totalItem > 0) {
    badge.style.display = 'inline-block'
    badge.textContent = totalItem
  } else {
    badge.style.display = 'none'
  }
}

function renderProducts() {
const list = document.getElementById('productList')
html = ""

products.forEach(item => {
  html += `
  <div class='card'>
    <img 
      src='${item.foto ? "/img/" + item.foto : "/img/no-image.png"}'  
      loading="lazy" 
      alt='${item.nama}' 
      width='200' 
      height='150'>
    <div class='card-body'>
      <h4>${item.nama}</h4>
      <p>stok: ${item.stok}</p>
      <p class='price'>Rp ${item.harga}</p>
      <button onclick='addToCart(${item.id})'>tambah ke keranjang</button>
    </div>
  </div>`
})
list.innerHTML = html
}
renderProducts()


function addToCart(id) {
  const barang = products.find(b => b.id === id)
    
    if(!barang || barang.stok <= 0) {
      alert('barang habis')
      return
    }

    const k = keranjang.find(e => e.id === id)

     if(k) {
      k.jumlah++
    }else {
      keranjang.push({
  id: barang.id,
  nama: barang.nama,
  harga: barang.harga,
  jumlah: 1
})
}
    
   barang.stok--
    renderKeranjang()
    renderProducts()
    updateBadge()
  }
    
function renderKeranjang() {
  const cart = document.getElementById('cartList')
  const total = document.getElementById('total')
  html =''

  keranjang.forEach((c, index) => {
    html += ` 
    <p>${c.nama} - ${c.harga} X ${c.jumlah}
      <button class='btn-hapus' data-index='${index}'>Batal</button>
      </p>
    `
    })
    cart.innerHTML = html
    document.querySelectorAll('.btn-hapus').forEach(btn => {
  btn.addEventListener('click', function () {
    hapus(this.dataset.index)
  })
})

  let subTotal = keranjang.reduce((sum, c) => {
    return sum + c.harga * c.jumlah
  }, 0)
  total.innerHTML = 'Total Pembayaran Rp' + subTotal.toLocaleString()

}
renderProducts()
renderKeranjang()



function hapus(index) {
  const item = keranjang[index]
  const produk = products.find(p => p.id === item.id)

  produk.stok += item.jumlah   // stok balik
  keranjang.splice(index, 1)

  document.querySelector(".pop").style.display ="none"
  document.getElementById("nama").value = "";
        document.getElementById("hp").value = "";
        document.getElementById("alamat").value = "";
  renderKeranjang()
  renderProducts()
  updateBadge()
}

const krj = document.getElementById('krjn')
const belanja = document.getElementById('belanjaan')

krj.addEventListener('click', function() {
 belanja.classList.toggle('active')
})
const delet = document.createElement('span')
 delet.innerText = 'X'
 delet.setAttribute('class', 'delet')
 belanja.appendChild(delet)

 delet.addEventListener('click', function() {
    belanja.classList.remove('active')
 })

 belanja.addEventListener("click", function(e) {
  if(e.target === belanja) {
    belanja.classList.remove("active")
  }
 })

function checkout() {
  if(keranjang.length === 0) {
  return alert('keranjang kosong')
  }
  document.querySelector(".pop").style.display ="block"
  belanja.classList.remove("active")
}

function kirim() {
  const user = {
    nama: document.getElementById("nama").value,
    hp: document.getElementById("hp").value,
    alamat: document.getElementById("alamat").value
  }

  fetch("/checkout", {
    method:"POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ user, keranjang })
  })
  .then(res => res.json())
  .then(data => {

    if(!data.success){
      alert(data.message)
      return
    }

    alert("Checkout berhasil âœ… Total: Rp " + data.total.toLocaleString())

    // kosongkan array TANPA reassign
    keranjang.length = 0

    renderKeranjang()
    renderProducts()
    updateBadge()

    document.querySelector(".pop").style.display ="none"
  })
  .catch(err => {
    console.error(err)
    alert("Terjadi kesalahan")
  })
}



if (window.innerWidth <= 768) {

  const sheet = document.getElementById("sheet");
  let startY = 0;

  sheet.addEventListener("touchstart", e=>{
    startY = e.touches[0].clientY;
  });

  sheet.addEventListener("touchend", e=>{
    let endY = e.changedTouches[0].clientY;

    if(endY < startY - 50){
      sheet.style.transform = "translateY(0)";
    }

    if(endY > startY + 50){
      sheet.style.transform = "translateY(88%)";
    }
  });

}

</script>

</body>
</html>


